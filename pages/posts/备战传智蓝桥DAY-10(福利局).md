---
layout: post
title: å¤‡æˆ˜ä¼ æ™ºè“æ¡¥DAY-10(ç¦åˆ©å±€)
date: 2025-02-17 00:25:06
tags: 
    - ç®—æ³•
categories: çˆ±è®°å½•
#top : 1 #ç½®é¡¶æ•°å€¼(è¶Šå¤§è¶Šåœ¨å‰é¢)
draft: false #trueä¸ºè‰ç¨¿è®°å¾—æ”¹falseå‘å¸ƒæ—¶
#time_warning: 30 #è¿‡å¤šå°‘å¤©ä¼šè­¦å‘Š
#color: red  #æ›´æ”¹è¿›å…¥é¡µé¢çš„æ ‡é¢˜é¢œè‰²
#postTitleClass: "custom-title" #æ›´æ”¹æ–‡ç« åˆ—è¡¨æ ‡é¢˜é¢œè‰²,è‡ªå®šä¹‰çš„CSSåœ¨Styleæ–‡ä»¶å¤¹é‡Œindex.scss
sponsor: false 
copyright: false
cover : /posts/å¤‡æˆ˜ä¼ æ™ºè“æ¡¥DAY-10(ç¦åˆ©å±€)_2025-02-17-00-30-43.png
codeHeightLimit: 300
---
### ğŸ•’ **å­¦ä¹ ä¸ç»ƒä¹ è®¡åˆ’**
| â° æ—¶é—´æ®µ      | ğŸ“˜ å†…å®¹                        |
|----------------|--------------------------------|
| 21:00-00:30   | ğŸ“ åˆ·æœ€çŸ­è·¯ç»¼åˆé¢˜ç›® + æ··æ—¶é—´         |

---

### âœ… **å®Œæˆæƒ…å†µ**
- **ä»Šæ—¥ç›®æ ‡å®Œæˆæƒ…å†µ**ï¼š
  - âœ… **å®Œæˆ**ï¼šå®Œæˆ 1 é“é¢˜ç›®(ä»Šå¤©ç¡+ç©å—¨äº†)
  >è“æ¡¥äº‘è¯¾
  - [æ›²ç‡é©±åŠ¨ã€ç®—æ³•èµ›ã€‘](https://www.lanqiao.cn/problems/20052/) - æœ€çŸ­è·¯[ä¸­ç­‰ğŸŸ ]
  - âŒ **æœªå®Œæˆ**ï¼š

---

### ğŸ’¡ **è§£é¢˜æ€è·¯ä¸æ€»ç»“**

#### é¢˜ç›®1.[æ›²ç‡é©±åŠ¨ã€ç®—æ³•èµ›ã€‘](https://www.lanqiao.cn/problems/20052/)
- **è§£é¢˜æ–¹æ³•**ï¼šè·‘k+1æ¬¡Dijkstra
- **é‡åˆ°çš„é—®é¢˜**ï¼šè¯•äº†ä¸€ä¸‹äºŒç»´distæ•°ç»„,ç¬¬äºŒç»´è¡¨ç¤ºç”¨äº†å‡ æ¬¡xoræ“ä½œ,ä½†è¿™æ ·å†™å‡ºæ¥åˆä¸å¯¹,ä¸çŸ¥é“è¿™ä¸ªæ–¹æ³•èƒ½ä¸èƒ½è¡Œ
- **è§£å†³æ–¹æ¡ˆ**ï¼š
```cpp:line-numbers
#include <bits/stdc++.h>
// #define int long long // è‡ªè§‰å»æ‰ï¼Œå½“éœ€è¦ memset æ•°ç»„ä¸º 0x3f æ—¶ä½¿ç”¨
#define INF 0x3f3f3f3f
#define PII pair<int, int>
#define ULL unsigned long long
#define PIII tuple<int, int, int>
#define all(v) v.begin(), v.end()
#define debug(a) cout << #a << " = " << a << endl;
using namespace std;
constexpr int N = 1 * 1e3 + 10, M = 5 * 1e3 + 10;

int n, m, k;
int C[N];
int dist[N];
vector<PII> G[2*N];
void Dijkstra(int xxor) {
    priority_queue<PII, vector<PII>, greater<PII>> heap;
    for (int i = 1; i <= n; i++) {
        if (dist[i] != INF) {
            heap.emplace(dist[i], i);
        }
    }
    while (heap.size()) {
        auto [d, u] = heap.top();
        heap.pop();
        if (dist[u] < d) continue;
        for (auto [v, w] : G[u]) {
            if (d + (w ^ xxor) < dist[v]) {
                dist[v] = d + (w ^ xxor);
                heap.emplace(dist[v], v);
            }
        }
    }
}
void solve() {
    cin >> n >> m;
    while (m--) {
        int u, v, w;
        cin >> u >> v >> w;
        G[u].emplace_back(v, w);
        G[v].emplace_back(u, w);
    }
    cin >> k;
    for (int i = 1; i <= k; i++) cin >> C[i];

    memset(dist, 0x3f, sizeof dist);
    int xxor = 0;
    dist[1] = 0;
    for (int i = 0; i <= k; i++) {
        xxor ^= C[i];
        Dijkstra(xxor);
    }

    for (int i = 1; i <= n; i++) cout << (dist[i] > INF / 2 ? -1 : dist[i]) << ' ';
}

signed main() {
    ios::sync_with_stdio(0); cin.tie(nullptr), cout.tie(nullptr);
    int _ = 1;
    // cin >> _;
    while (_--) {
        solve();
    }
    return 0;
}

/**
 *    author: Nijika_jia
 *    created: 2025.02.16 20:54:44
 *    description: C++20 Algorithm Template for Competitive Programming
 */
```




#### é¢å¤–æ”¶è·:
##### SPFAçš„å„ç§ä¼˜åŒ–

- SLF(Small Label First)ä¼˜åŒ–
```cpp:line-numbers
void spfa() {
    memset(dist, 0x3f, sizeof dist);
    deque<int> q;
    q.push_back(s);
    dist[s] = 0;
    vis[s] = 1;
    while (q.size()) {
        int u = q.front();
        q.pop_front();
        vis[u] = false;
        for (auto [v, w] : G[u]) {
            if(dist[u] + w < dist[v]) {
                dist[v] = dist[u] + w;
                if (vis[v]) continue;
                vis[v] = 1;
                if (q.size() && dist[v] > dist[q.front()]) q.push_back(v);
                else q.push_front(v);
            } 
        }
    }
}
```

- LLL(Large Label Last)ä¼˜åŒ–(è¿™ä¸ªä¸å¸¸ç”¨,åº”è¯¥è¯´ç»å¸¸è·ŸSLFç»„åˆèµ·æ¥ç”¨)
- SLF + LLLä¼˜åŒ–
```cpp:line-numbers
void spfa() {
    memset(dist, 0x3f, sizeof dist);
    deque<int> q;
    q.push_back(s);
    dist[s] = 0;
    vis[s] = 1;
    int sum = dist[s], num = 1;
    while (q.size()) {
        int u = q.front();
        while (dist[u] * num > sum) {
            q.pop_front();
            q.push_back(u);
            u = q.front();
        }
        q.pop_front();
        sum -= dist[u];
        num --;
        vis[u] = false;
        for (auto [v, w] : G[u]) {
            if(dist[u] + w < dist[v]) {
                dist[v] = dist[u] + w;
                if (vis[v]) continue;
                vis[v] = 1;
                sum += dist[v];
                num ++;
                if (q.size() && dist[v] > dist[q.front()]) q.push_back(v);
                else q.push_front(v);
            } 
        }
    }
}
```

- md

åœ¨å®é™…ä½¿ç”¨ SPFAï¼ˆShortest Path Faster Algorithmï¼‰æ—¶ï¼Œä¼˜åŒ–ç­–ç•¥çš„é€‰æ‹©å–å†³äºå›¾çš„æ€§è´¨ã€‚å¸¸è§çš„ä¼˜åŒ–ç­–ç•¥åŒ…æ‹¬ **SLFï¼ˆSmall Label Firstï¼‰**ã€**LLLï¼ˆLarge Label Lastï¼‰**ã€**SLF+LLL ç»„åˆ** å’Œ **DFS ä¼˜åŒ–**ã€‚è®©æˆ‘ä»¬çœ‹çœ‹å“ªç§æœ€å¸¸ç”¨ä»¥åŠå®ƒä»¬çš„é€‚ç”¨æƒ…å†µã€‚

---

###### **1ï¸âƒ£ SLFï¼ˆSmall Label Firstï¼‰**
- **æ ¸å¿ƒæ€æƒ³**ï¼šæ¯æ¬¡å°†æ–°æ¾å¼›çš„ç‚¹æ’å…¥é˜Ÿåˆ—çš„æœ€å‰é¢ï¼ˆç±»ä¼¼ **ä¼˜å…ˆé˜Ÿåˆ—** çš„æ•ˆæœï¼‰ï¼Œè¿™æ ·æ›´å°çš„è·ç¦»ä¼˜å…ˆå‡ºé˜Ÿï¼Œæé«˜æ¾å¼›æ•ˆç‡ã€‚
- **å®ç°æ–¹å¼**ï¼š
  ```cpp
  if (!in_queue[v]) {
      if (!q.empty() && dist[v] < dist[q.front()]) {
          q.push_front(v);  // æ’å…¥é˜Ÿé¦–
      } else {
          q.push_back(v);   // æ’å…¥é˜Ÿå°¾
      }
      in_queue[v] = true;
  }
  ```
- **é€‚ç”¨æƒ…å†µ**ï¼š
  - é€‚ç”¨äº **è¾ƒç¨€ç–çš„å›¾**ï¼Œç‰¹åˆ«æ˜¯ **éšæœºå›¾** æˆ–è€… **å•è°ƒé€’å¢çš„è¾¹æƒå›¾**ï¼Œå¯ä»¥å‡å°‘ä¸å¿…è¦çš„æ›´æ–°æ“ä½œã€‚
- **å¸¸ç”¨ç¨‹åº¦**ï¼šâœ… **å¸¸ç”¨**ï¼Œå¾ˆå¤šæƒ…å†µä¸‹éƒ½ä¼šåŠ ä¸Šã€‚

---

###### **2ï¸âƒ£ LLLï¼ˆLarge Label Lastï¼‰**
- **æ ¸å¿ƒæ€æƒ³**ï¼šå¦‚æœé˜Ÿé¦–å…ƒç´ çš„ `dist[u]` å¤§äºé˜Ÿåˆ—çš„å¹³å‡å€¼ï¼Œåˆ™æŠŠå®ƒæ”¾åˆ°é˜Ÿå°¾ï¼Œé˜²æ­¢è¿‡å¤§çš„ç‚¹åå¤å‡ºé˜Ÿå½±å“æ•ˆç‡ã€‚
- **å®ç°æ–¹å¼**ï¼š
  ```cpp
  if (dist[q.front()] > avg_dist) {
      q.push_back(q.front());
      q.pop_front();
  }
  ```
- **é€‚ç”¨æƒ…å†µ**ï¼š
  - é€‚ç”¨äº **è¾¹æƒå˜åŒ–è¾ƒå¤§ï¼Œå®¹æ˜“äº§ç”Ÿå¼‚å¸¸å€¼** çš„æƒ…å†µã€‚
  - å¯ä»¥å‡å°‘ **è´Ÿç¯æ£€æµ‹æ—¶çš„é”™è¯¯è·¯å¾„**ã€‚
- **å¸¸ç”¨ç¨‹åº¦**ï¼šâ­• **è¾ƒå°‘å•ç‹¬ä½¿ç”¨**ï¼Œä½†ä¼šå’Œ SLF ç»“åˆä½¿ç”¨ã€‚

---

###### **3ï¸âƒ£ SLF + LLL ç»„åˆ**
- **æ ¸å¿ƒæ€æƒ³**ï¼šç»“åˆ SLF å’Œ LLLï¼Œä¸¤è€…äº’è¡¥ï¼Œè®©æ¾å¼›æ›´å¿«ä¸”é¿å…å¼‚å¸¸æ•°æ®å¹²æ‰°ã€‚
- **å®ç°æ–¹å¼**ï¼š
  - **å…ˆä½¿ç”¨ SLF æ’å…¥é˜Ÿåˆ—**ï¼ˆä¼˜å…ˆå°çš„ `dist[v]`ï¼‰ã€‚
  - **å¦‚æœé˜Ÿé¦–çš„ `dist[u]` è¿‡å¤§ï¼ˆé«˜äºé˜Ÿåˆ—å‡å€¼ï¼‰ï¼Œåˆ™æ”¾é˜Ÿå°¾**ï¼Œé¿å…æç«¯æƒ…å†µå½±å“è®¡ç®—ã€‚

- **é€‚ç”¨æƒ…å†µ**ï¼š
  - é€‚ç”¨äº **ç¨€ç–å›¾ + å¤æ‚è¾¹æƒ** çš„æƒ…å†µã€‚
  - é€‚ç”¨äº **å¯èƒ½æœ‰è´Ÿæƒè¾¹çš„å›¾**ï¼Œä½†ä¸èƒ½å¤„ç†è´Ÿç¯ã€‚
- **å¸¸ç”¨ç¨‹åº¦**ï¼šâœ… **æœ€å¸¸ç”¨**ï¼Œå¾ˆå¤šç«èµ›ä»£ç ä¸­ä¼šçœ‹åˆ°è¿™ä¸ªä¼˜åŒ–ã€‚

---

###### **4ï¸âƒ£ DFS ä¼˜åŒ–ï¼ˆå¯çœ‹ä½œ SPFA çš„é€’å½’ç‰ˆæœ¬ï¼‰**
- **æ ¸å¿ƒæ€æƒ³**ï¼šç”¨ **é€’å½’çš„æ–¹å¼** ä»£æ›¿é˜Ÿåˆ—ï¼Œä½¿æ¾å¼›é¡ºåºæ›´æ¥è¿‘æ·±åº¦æœç´¢ï¼Œå‡å°‘æ— æ•ˆæ¾å¼›æ¬¡æ•°ã€‚
- **å®ç°æ–¹å¼**ï¼š
  ```cpp
  void spfa_dfs(int u) {
      in_stack[u] = true;
      for (auto [v, w] : G[u]) {
          if (dist[v] > dist[u] + w) {
              dist[v] = dist[u] + w;
              if (!in_stack[v]) {
                  spfa_dfs(v);
              }
          }
      }
      in_stack[u] = false;
  }
  ```
- **é€‚ç”¨æƒ…å†µ**ï¼š
  - **ç¨€ç–å›¾ + DAGï¼ˆæ— ç¯æœ‰å‘å›¾ï¼‰** æ—¶æ•ˆæœå¥½ã€‚
  - **é€’å½’ä¼˜åŒ–å¯èƒ½å¸¦æ¥æ ˆæº¢å‡ºé£é™©**ï¼Œä¸é€‚ç”¨äºå¤§è§„æ¨¡å›¾ã€‚
- **å¸¸ç”¨ç¨‹åº¦**ï¼šâŒ **è¾ƒå°‘ä½¿ç”¨**ï¼Œå› é€’å½’æ·±åº¦é—®é¢˜ä¸å¦‚ SLF/LLL ç»„åˆç¨³å¦¥ã€‚

---

###### **ğŸ’¡ æ€»ç»“ï¼šå“ªç§æœ€å¸¸ç”¨ï¼Ÿ**
| ä¼˜åŒ–æ–¹æ³• | é€‚ç”¨åœºæ™¯ | å¸¸ç”¨ç¨‹åº¦ |
|----------|----------|---------|
| **SLFï¼ˆSmall Label Firstï¼‰** | è¾ƒç¨€ç–å›¾ï¼Œéšæœºå›¾ | âœ… å¾ˆå¸¸ç”¨ |
| **LLLï¼ˆLarge Label Lastï¼‰** | å¤æ‚è¾¹æƒï¼Œå‡å°‘å¼‚å¸¸å½±å“ | â­• è¾ƒå°‘å•ç‹¬ä½¿ç”¨ |
| **SLF + LLL ç»„åˆ** | è¾ƒç¨€ç–å›¾ + å¤æ‚è¾¹æƒ | âœ… æœ€å¸¸ç”¨ |
| **DFS ä¼˜åŒ–** | DAGï¼Œç¨€ç–å›¾ | âŒ ä¸å¸¸ç”¨ |

**ç»“è®ºï¼š**
- **SLF + LLL** ç»„åˆæ˜¯æœ€å¸¸ç”¨çš„ä¼˜åŒ–æ–¹å¼ï¼Œé€‚ç”¨äºå¤§å¤šæ•° **ç«èµ› & å·¥ç¨‹** åœºæ™¯ã€‚
- **SLF å•ç‹¬ä½¿ç”¨** ä¹Ÿå¾ˆå¸¸è§ï¼Œèƒ½æé«˜æ”¶æ•›é€Ÿåº¦ã€‚
- **LLL å•ç‹¬ç”¨å¾—å°‘**ï¼Œä½†èƒ½é˜²æ­¢æç«¯æƒ…å†µå½±å“è®¡ç®—ã€‚
- **DFS ä¼˜åŒ–ç‰ˆæœ¬** ç”¨å¾—å¾ˆå°‘ï¼Œå› ä¸ºé€’å½’æ·±åº¦é—®é¢˜ã€‚

å¦‚æœä½ åœ¨æ¯”èµ›ä¸­å†™ SPFAï¼Œä¸€èˆ¬é»˜è®¤ **SLF + LLL** æœ€ä¼˜è§£ï¼ğŸš€

---

### ğŸ”§ **æ”¹è¿›è®¡åˆ’**
- é’ˆå¯¹ä»Šæ—¥é—®é¢˜ï¼š
  - ğŸ“– **å¤ä¹ **ï¼šæ²¡å¤ä¹ 
  - ğŸ“Š **åˆ·é¢˜**ï¼šæ²¡åˆ·å¤šå°‘
  - â³ **æ—¶é—´ç®¡ç†**ï¼šç©çˆ½äº†,ä½†ä¹Ÿä»˜å‡ºäº†ç›¸åº”çš„ä»£ä»·(æŒ‡æ™šä¸Šåšé¢˜åšç¡ç€äº†)
---

### ğŸ“– **æ˜æ—¥è®¡åˆ’**
  - ğŸ’» ç£•å°ç»„ä½œä¸š
---

### ğŸ“ **é™„æ³¨**
- æ˜å¤©æ›´æ²¡æ—¶é—´åˆ·äº†,å¾—åšå°ç»„ä½œä¸šäº†
### ğŸ•å°é¢å›¾
![](/posts/å¤‡æˆ˜ä¼ æ™ºè“æ¡¥DAY-10(ç¦åˆ©å±€)_2025-02-17-00-30-43.png)
---