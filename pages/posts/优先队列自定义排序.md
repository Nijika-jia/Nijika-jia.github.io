---
layout: post
title: ä¼˜å…ˆé˜Ÿåˆ—<priority_queue>è‡ªå®šä¹‰æ’åº
date: 2025-02-11 18:05:59
tags: 
    - STL
    - ç®—æ³•
    - C++
    - æ•°æ®ç»“æ„
    - ä¼˜å…ˆé˜Ÿåˆ—
    - æ’åºç®—æ³•
    - ç¼–ç¨‹æŠ€å·§
    - ç«èµ›ç¼–ç¨‹
    - Lambdaè¡¨è¾¾å¼
    - ç¼–ç¨‹å®è·µ
categories: çˆ±åˆ†äº«
#top : 1 #ç½®é¡¶æ•°å€¼(è¶Šå¤§è¶Šåœ¨å‰é¢)
draft: false #trueä¸ºè‰ç¨¿è®°å¾—æ”¹falseå‘å¸ƒæ—¶
#time_warning: 30 #è¿‡å¤šå°‘å¤©ä¼šè­¦å‘Š
#color: red  #æ›´æ”¹è¿›å…¥é¡µé¢çš„æ ‡é¢˜é¢œè‰²
#postTitleClass: "custom-title" #æ›´æ”¹æ–‡ç« åˆ—è¡¨æ ‡é¢˜é¢œè‰²,è‡ªå®šä¹‰çš„CSSåœ¨Styleæ–‡ä»¶å¤¹é‡Œindex.scss
sponsor: false 
copyright: false
cover : /posts/ä¼˜å…ˆé˜Ÿåˆ—è‡ªå®šä¹‰æ’åº_2025-02-13-01-17-46.png
---
# ğŸ¯ **C++ ä¼˜å…ˆé˜Ÿåˆ—è‡ªå®šä¹‰æ’åºå…¨æŒ‡å—**
`std::priority_queue` æ˜¯ C++ ä¸­å¸¸ç”¨çš„å †æ•°æ®ç»“æ„ï¼Œé»˜è®¤å®ç°æœ€å¤§å †ï¼ˆ`top()` æ˜¯æœ€å¤§å€¼ï¼‰ã€‚åœ¨å®é™…å¼€å‘æˆ–ç®—æ³•ç«èµ›ä¸­ï¼Œæˆ‘ä»¬å¸¸å¸¸éœ€è¦è‡ªå®šä¹‰æ’åºè§„åˆ™æ¥æ»¡è¶³ä¸åŒéœ€æ±‚ï¼Œæ¯”å¦‚æ„é€ æœ€å°å †ã€å¤šå­—æ®µæ’åºç­‰ã€‚

æœ¬æ–‡å°†å¸¦ä½ å…¨é¢æŒæ¡ä¼˜å…ˆé˜Ÿåˆ—çš„è‡ªå®šä¹‰æ’åºæ–¹æ³•ï¼ŒåŒ…æ‹¬å¤šç§å®ç°æ–¹å¼ï¼ğŸ’¡

---

## ğŸš€ **1. é»˜è®¤ä¼˜å…ˆé˜Ÿåˆ—è¡Œä¸º**

åœ¨ C++ ä¸­ï¼Œ`std::priority_queue` é»˜è®¤å®ç°ä¸º **æœ€å¤§å †**ã€‚

```cpp
#include <queue>
#include <iostream>
using namespace std;

int main() {
    priority_queue<int> pq;
    pq.push(3);
    pq.push(1);
    pq.push(5);

    while (!pq.empty()) {
        cout << pq.top() << " "; // è¾“å‡ºï¼š5 3 1
        pq.pop();
    }
    return 0;
}
```

---

## ğŸ› ï¸ **2. è‡ªå®šä¹‰æ’åºçš„æ–¹å¼**

### **æ–¹æ³•ä¸€ï¼šé‡è½½è¿ç®—ç¬¦ `operator<`**

ç›´æ¥åœ¨ç»“æ„ä½“ä¸­é‡è½½ `operator<`ï¼Œå¯ä»¥è®©æ’åºé€»è¾‘å†…ç½®åˆ°æ•°æ®ç±»å‹ä¸­ã€‚è¿™ç§æ–¹æ³•å¯¹ä¼˜å…ˆé˜Ÿåˆ—å¾ˆå‹å¥½ï¼Œå› ä¸ºé»˜è®¤ `std::priority_queue` ä¼šä½¿ç”¨ `operator<` æ¯”è¾ƒä¸¤ä¸ªå¯¹è±¡ã€‚

```cpp
#include <queue>
#include <vector>
#include <iostream>
using namespace std;

struct Job {
    int id, priority;

    // é‡è½½ operator<ï¼Œä¼˜å…ˆçº§é«˜çš„ä¼˜å…ˆ
    bool operator<(const Job& other) const {
        return priority < other.priority; // ä¼˜å…ˆçº§é™åºæ’åˆ—
    }
};

int main() {
    priority_queue<Job> pq;

    pq.push({1, 10});
    pq.push({2, 30});
    pq.push({3, 20});

    while (!pq.empty()) {
        Job job = pq.top();
        cout << "Job ID: " << job.id << ", Priority: " << job.priority << endl;
        pq.pop();
    }
    return 0;
}
```

#### **è¾“å‡ºï¼š**
```
Job ID: 2, Priority: 30
Job ID: 3, Priority: 20
Job ID: 1, Priority: 10
```

è¿™ç§æ–¹å¼é€‚åˆæ’åºé€»è¾‘ç®€å•ä¸”å›ºå®šçš„åœºæ™¯ï¼Œä»£ç æ›´ç›´è§‚ã€‚

---

### **æ–¹æ³•äºŒï¼šä½¿ç”¨ `std::greater` æ¯”è¾ƒå™¨ï¼ˆæœ€å°å †ï¼‰**

é»˜è®¤çš„ä¼˜å…ˆé˜Ÿåˆ—æ˜¯æœ€å¤§å †ï¼Œå¦‚æœéœ€è¦æœ€å°å †ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨æ ‡å‡†åº“æä¾›çš„ `std::greater` æ¯”è¾ƒå™¨ï¼š

```cpp
#include <queue>
#include <vector>
#include <iostream>
using namespace std;

int main() {
    priority_queue<int, vector<int>, greater<int>> minHeap;

    minHeap.push(3);
    minHeap.push(1);
    minHeap.push(5);

    while (!minHeap.empty()) {
        cout << minHeap.top() << " "; // è¾“å‡ºï¼š1 3 5
        minHeap.pop();
    }
    return 0;
}
```

---

### **æ–¹æ³•ä¸‰ï¼šè‡ªå®šä¹‰æ¯”è¾ƒç»“æ„ä½“**

å¯¹äºæ›´å¤æ‚çš„æ’åºé€»è¾‘ï¼Œå¯ä»¥é€šè¿‡**è‡ªå®šä¹‰æ¯”è¾ƒç»“æ„ä½“**å®ç°ã€‚

```cpp
#include <queue>
#include <vector>
#include <iostream>
using namespace std;

struct Task {
    int id, priority;
    Task(int id, int priority) : id(id), priority(priority) {}
};

// è‡ªå®šä¹‰æ¯”è¾ƒå™¨ï¼šä¼˜å…ˆçº§é«˜çš„ä¼˜å…ˆ
struct CompareTask {
    bool operator()(const Task& t1, const Task& t2) {
        return t1.priority < t2.priority; // æŒ‰ä¼˜å…ˆçº§é™åºæ’åˆ—
    }
};

int main() {
    priority_queue<Task, vector<Task>, CompareTask> pq;

    pq.push(Task(1, 10));
    pq.push(Task(2, 30));
    pq.push(Task(3, 20));

    while (!pq.empty()) {
        Task t = pq.top();
        cout << "Task ID: " << t.id << ", Priority: " << t.priority << endl;
        pq.pop();
    }
    return 0;
}
```

#### **è¾“å‡ºï¼š**
```
Task ID: 2, Priority: 30
Task ID: 3, Priority: 20
Task ID: 1, Priority: 10
```

---

### **æ–¹æ³•å››ï¼šLambda è¡¨è¾¾å¼**

C++11 æä¾›çš„ Lambda è¡¨è¾¾å¼éå¸¸çµæ´»ï¼Œå°¤å…¶é€‚åˆç«èµ›æˆ–ä¸´æ—¶éœ€æ±‚çš„åœºæ™¯ã€‚

#### **æœ€å°å †å®ç°**
```cpp
#include <queue>
#include <vector>
#include <iostream>
using namespace std;

int main() {
    auto compare = [](int a, int b) { return a > b; }; // æœ€å°å †
    priority_queue<int, vector<int>, decltype(compare)> minHeap(compare);

    minHeap.push(3);
    minHeap.push(1);
    minHeap.push(5);

    while (!minHeap.empty()) {
        cout << minHeap.top() << " "; // è¾“å‡ºï¼š1 3 5
        minHeap.pop();
    }
    return 0;
}
```

#### **å¤æ‚æ•°æ®ç±»å‹æ’åº**
```cpp
#include <queue>
#include <vector>
#include <iostream>
using namespace std;

struct Point {
    int x, y;
    Point(int x, int y) : x(x), y(y) {}
};

int main() {
    auto compare = [](const Point& p1, const Point& p2) {
        if (p1.x == p2.x) return p1.y < p2.y; // æŒ‰ y é™åºæ’åˆ—
        return p1.x > p2.x; // å¦åˆ™æŒ‰ x å‡åºæ’åˆ—
    };

    priority_queue<Point, vector<Point>, decltype(compare)> pq(compare);

    pq.push(Point(1, 10));
    pq.push(Point(2, 5));
    pq.push(Point(1, 20));

    while (!pq.empty()) {
        Point p = pq.top();
        cout << "(" << p.x << ", " << p.y << ")" << endl;
        pq.pop();
    }
    return 0;
}
```

#### **è¾“å‡ºï¼š**
```
(1, 20)
(1, 10)
(2, 5)
```

---

## ğŸ”¥ **3. æ€»ç»“ä¸å»ºè®®**

| æ–¹æ³•                     | åœºæ™¯                                      | æ¨èç¨‹åº¦ |
|--------------------------|-------------------------------------------|----------|
| é‡è½½è¿ç®—ç¬¦ `operator<`      | å›ºå®šæ’åºè§„åˆ™ï¼Œä»£ç ç®€æ´                     | â­â­â­â­       |
| `std::greater` æ¯”è¾ƒå™¨        | ç®€å•æ•°æ®ç±»å‹çš„æœ€å°å †                      | â­â­â­â­       |
| è‡ªå®šä¹‰æ¯”è¾ƒç»“æ„ä½“             | é•¿æœŸä½¿ç”¨çš„å¤æ‚æ’åºé€»è¾‘                      | â­â­â­       |
| Lambda è¡¨è¾¾å¼              | çµæ´»ã€ä¸´æ—¶çš„æ’åºéœ€æ±‚ï¼Œé€‚åˆç«èµ›æˆ–å¿«é€Ÿå¼€å‘         | â­â­â­â­â­     |

### ğŸŒŸ **æœ€ä½³å®è·µ**
1. å›ºå®šæ’åºï¼šä¼˜å…ˆä½¿ç”¨ **é‡è½½è¿ç®—ç¬¦**ã€‚
2. ç®€å•åœºæ™¯ï¼šç”¨ `std::greater` å¿«é€Ÿå®ç°æœ€å°å †ã€‚
3. ä¸´æ—¶éœ€æ±‚ï¼šé€‰æ‹© **Lambda è¡¨è¾¾å¼**ï¼Œæ–¹ä¾¿çµæ´»ã€‚
4. é•¿æœŸå¤æ‚é€»è¾‘ï¼šè‡ªå®šä¹‰ **æ¯”è¾ƒç»“æ„ä½“**ï¼Œç»“æ„æ¸…æ™°ï¼Œå¤ç”¨æ€§é«˜ã€‚

é€‰æ‹©é€‚åˆè‡ªå·±çš„æ–¹æ³•å§ï¼ğŸ‰ **ç†Ÿç»ƒæŒæ¡è‡ªå®šä¹‰æ’åºï¼Œä¼˜å…ˆé˜Ÿåˆ—çš„ä½¿ç”¨å°†å˜å¾—æ›´åŠ é«˜æ•ˆçµæ´»ï¼**