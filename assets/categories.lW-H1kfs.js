import{p as E,c as F,a as N,q as j,b as W,d as M,e as H,_ as J,n as O,f as X,g as Z,h as G}from"./app.DNo6EpXn.js";import{_ as Q}from"./YunPostCollapse.vue_vue_type_style_index_0_lang.i0KzsgQr.js";import{a as I,u as ee}from"./chunks/vue-router.Bri7Tm3H.js";import"./chunks/dayjs.o6Yvz3Rh.js";import{M as b,q as k,aZ as z,s as C,u as s,bk as i,aL as o,F as x,t as L,bJ as u,v as m,bb as $,aU as Y,aD as te,I as r,g as q,aX as A,a$ as ae}from"./framework.CNV3Xz51.js";import{u as w}from"./chunks/vue-i18n.B3U7zzgP.js";import{a as ne,u as oe}from"./animation.C241oeFc.js";import{_ as re}from"./YunPageHeader.vue_vue_type_script_setup_true_lang.7oVnMNS8.js";import"./chunks/pinia.BouEHZ11.js";import"./chunks/@vueuse/motion.BVRzfI4R.js";import"./chunks/nprogress.BWxlRuO9.js";import"./index.BRXJGymZ.js";const le={font:"serif black"},se=b({__name:"YunCategoryChildItem",props:{i:{},categoryItem:{},parentKey:{}},setup(e){const{locale:l}=w();function g(t){const n=l.value==="zh-CN"?"zh":l.value;return t[`title_${n}`]?t[`title_${n}`]:t.title}const a=I(),f=k(()=>{const t=a.query.category||"";return Array.isArray(t)?[t]:t.split("/")});return(t,n)=>{const y=B,v=z("RouterLink");return i(E)(e.categoryItem)?(o(),C(y,{key:0,"parent-key":e.parentKey?`${e.parentKey}/${e.categoryItem.name}`:e.categoryItem.name,category:e.categoryItem,collapsable:!f.value.includes(e.categoryItem.name)},null,8,["parent-key","category","collapsable"])):(o(),s(x,{key:1},[e.categoryItem.title?(o(),C(v,{key:0,to:e.categoryItem.path||"",class:"inline-flex items-center gap-2 px-3 py-2 w-full rounded",hover:"bg-black/5"},{default:u(()=>[n[0]||(n[0]=m("div",{"i-ri-file-text-line":""},null,-1)),m("span",le,$(g(e.categoryItem)),1)]),_:1},8,["to"])):L("v-if",!0)],64))}}}),ce={key:0,"i-ri-folder-add-line":""},ie={key:1,class:"text-$va-c-primary dark:text-$va-c-primary-lighter","i-ri-folder-reduce-line":""},ue={class:"rounded-full px-1.5 bg-black/5 shadow-sm",text:"xs black/55"},me={key:0},B=b({__name:"YunCategory",props:{i:{},parentKey:{},category:{},level:{},collapsable:{type:Boolean,default:!0}},setup(e){const l=e,g=ee(),a=Y(l.collapsable),{t:f}=w(),t=Y(),{show:n}=ne(t);function y(p){a.value=!1,g.push({query:{category:p}}),n()}te(()=>{const p=document.querySelector(".post-collapse-container");p&&(t.value=p)});const v=Y();return l.level===1&&oe(v,{i:l.i||0,y:20,duration:200}),(p,d)=>{const c=se;return o(),s(x,null,[m("li",{ref_key:"categoryRef",ref:v,class:"category-list-item inline-flex items-center cursor-pointer w-full gap-2 px-3 py-2 rounded",hover:"bg-black/5"},[m("span",{class:"folder-action inline-flex",hover:"text-$va-c-primary-lighter",onClick:d[0]||(d[0]=_=>a.value=!a.value)},[a.value?(o(),s("div",ce)):(o(),s("div",ie))]),m("span",{class:"category-name inline-flex items-center gap-2 w-full",onClick:d[1]||(d[1]=_=>y(e.parentKey))},[m("span",null,$(e.category.name==="Uncategorized"?i(f)("category.uncategorized"):e.category.name),1),m("span",ue,$(e.category.total),1)])],512),r(q,{"enter-active-class":"v-enter-active","enter-from-class":"v-enter-from","leave-active-class":"v-leave-active","leave-to-class":"v-leave-to",duration:{enter:200,leave:0}},{default:u(()=>[a.value?L("v-if",!0):(o(),s("ul",me,[(o(!0),s(x,null,A(e.category.children.values(),(_,h)=>(o(),s("li",{key:h,class:"post-list-item text-$va-c-text",m:"l-4",hover:"text-$va-c-primary-lighter"},[r(c,{i:h,"category-item":_,"parent-key":e.parentKey},null,8,["i","category-item","parent-key"])]))),128))]))]),_:1})],64)}}}),ge={flex:"~ col"},ye=b({__name:"YunCategories",props:{categories:{},level:{default:0},collapsable:{type:Boolean,default:!0}},setup(e){const l=I(),g=k(()=>{const a=l.query.category||"";return Array.isArray(a)?[a]:a.split("/")});return(a,f)=>{const t=B;return o(),s("div",ge,[(o(!0),s(x,null,A(e.categories.values(),(n,y)=>(o(),s("ul",{key:n.name,class:"category-list"},[r(t,{i:y,"parent-key":n.name,category:n,level:e.level+1,collapsable:!g.value.includes(n.name)},null,8,["i","parent-key","category","level","collapsable"])]))),128))])}}}),pe={text:"center",class:"yun-text-light",p:"2"},Le=b({__name:"categories",setup(e){const{t:l}=w(),g=F(),a=N(),f=I(),t=k(()=>f.query.category||""),n=j(),y=k(()=>(a.value.icon||(a.value.icon="i-ri-folder-2-line"),a.value.icon)),v=k(()=>g.postList.filter(c=>c.categories&&t.value!=="Uncategorized"?typeof c.categories=="string"?c.categories===t.value:c.categories.join("/").startsWith(t.value)&&c.categories[0]===t.value.split("/")[0]:!c.categories&&t.value==="Uncategorized"?c.categories===void 0:!1)),p=W(a);return M([H({"@type":"CollectionPage"})]),(d,c)=>{const _=J,h=re,K=ye,R=z("RouterView"),S=Q,P=O,T=X,U=Z,V=G;return o(),s(x,null,[r(U,null,{default:u(()=>[r(_),r(R,null,{default:u(({Component:D})=>[(o(),C(ae(D),null,{"main-header":u(()=>[r(h,{title:i(p)||i(l)("menu.categories"),icon:y.value,color:i(a).color,"page-title-class":i(a).pageTitleClass},null,8,["title","icon","color","page-title-class"])]),"main-content":u(()=>[r(q,{"enter-active-class":"animate-fade-in animate-duration-400",appear:""},{default:u(()=>[m("div",pe,$(i(l)("counter.categories",Array.from(i(n).children).length)),1)]),_:1}),r(K,{categories:i(n).children},null,8,["categories"]),r(R)]),"main-nav-before":u(()=>[t.value?(o(),C(P,{key:0,class:"post-collapse-container",m:"t-4",w:"full"},{default:u(()=>[r(h,{m:"t-10",title:t.value==="Uncategorized"?i(l)("category.uncategorized"):t.value.split("/").join(" / "),icon:"i-ri-folder-open-line"},null,8,["title"]),r(S,{w:"full",m:"b-4",p:"x-20 lt-sm:x-5",posts:v.value},null,8,["posts"])]),_:1})):L("v-if",!0)]),_:1}))]),_:1}),r(T)]),_:1}),r(V)],64)}}});export{Le as default};
